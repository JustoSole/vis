<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>MC1</title>

<style>
  svg circle {
    fill: steelblue;
    stroke: white;
  }
  svg text {
    font-size: 20px;
    fill: black;
    stroke: black;
  }
</style>  

</head>
<body>
<script src="https://d3js.org/d3.v5.min.js"></script>

  <div id="viz"></div>
  
<script> 
var data = [
  {"ID":1,"X":140,"Y":119},
  {"ID":2,"X":63,"Y":153},
  {"ID":3,"X":70,"Y":136},
  {"ID":4,"X":78,"Y":150},
  {"ID":5,"X":60,"Y":90},
  {"ID":6,"X":126,"Y":103},
  {"ID":7,"X":71,"Y":121},
  {"ID":8,"X":78,"Y":62},
  {"ID":9,"X":61,"Y":145},
  {"ID":10,"X":45,"Y":39},
  {"ID":11,"X":132,"Y":106},
  {"ID":12,"X":61,"Y":20},
  {"ID":13,"X":35,"Y":160},
  {"ID":14,"X":40,"Y":125},
  {"ID":15,"X":110,"Y":121}
];

var w = 400, h = 400;

var xScale = d3.scaleLinear().domain([0,200]).range([0,w]);
var yScale = d3.scaleLinear().domain([0,200]).range([h,0]);

var svg = d3.select("div#viz").append("svg")
  .attr("width",w)
  .attr("height",h);

var url = 'https://raw.githubusercontent.com/aaizemberg/vis/gh-pages/vast/Lekagul%20Roadways%202018.bmp';

svg.append("image")
   .attr("xlink:href",url)
   .attr("width",w)
   .attr("height",h);

svg.append("rect")
   .attr("x",0)
   .attr("y",0)
   .attr("width",w)
   .attr("height",h)
   .attr("fill","none")
   .attr("stroke-width",1)
   .attr("stroke","black");

svg.selectAll(".points")
   .data(data).enter().append("circle")
   .attr("class","points")
   .attr("cx", Math.trunc(d3.randomUniform(0, w)()) )
   .attr("cy", Math.trunc(d3.randomUniform(0, h)()) )
   .attr("r",0)
   .transition()
     .attr("cx", function(d) { return xScale(d.X);} )
     .attr("cy", function(d) { return yScale(d.Y);} )
     .attr("r",6)

svg.selectAll(".points")
   .append("title")
   .text( function(d) {return "El ID " + d.ID + " está en la posición: " + d.X + "," + d.Y; }  );

svg.selectAll(".textos")
   .data(data).enter().append("text")
   .attr("class","textos")
   .attr("x", Math.trunc(d3.randomUniform(0, w)()) )
   .attr("y", Math.trunc(d3.randomUniform(0, h)()) )
   .text( function(d) { return d.ID; }     )
   .transition()
     .attr("x", function(d) { return 5+xScale(d.X);}  )
     .attr("y", function(d) { return yScale(d.Y)+6;} );
   
</script>  
  
</body>
</html>
